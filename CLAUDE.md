# CLAUDE.md — Diet AirDS

This file is read automatically by Claude Code at session startup. It contains everything needed to work effectively on this project without prior context.

---

## What This Project Is

**Diet AirDS** is a multi-team design system supporting 10 sports organizations. It lives at `https://diet-air-ds.vercel.app` and provides a token-based CSS foundation for building UI components across different team brands with both light and dark mode theming.

The system is intentionally lean: pure CSS tokens + utility classes, no framework dependencies. Components are built by composing existing tokens and classes — never by writing custom CSS from scratch.

The ultimate goal: a perfected CSS system → React/TypeScript component library → Figma Make design system → an AI-driven design agent that makes correct, brand-accurate decisions based entirely on this knowledge base.

---

## Current Focus

- **Complex components** — Building higher-order components from tokens and primitives (beyond buttons, cards, inputs)
- **Usage patterns** — Uploading and codifying real UI examples as reusable component + template patterns; the goal is reducing guesswork for generative coding agents
- **React component library** — Once Figma designs are fully translated to this CSS system, next phase is React/TypeScript optimized as a Figma Make design system
- **Efficiency over perfection** — Sessions are often short. Use prior context and established patterns aggressively. When uncertain about a value, provide a best-guess and flag it rather than blocking.

### Working Principles for This Stage

- Find the closest existing component first and adapt it — don't invent new structure
- Flag degradation risks proactively (e.g. if a new pattern conflicts with established conventions)
- Accuracy on first attempt matters more than speed — the biggest time cost is corrections
- When a Figma spec is ambiguous, state the assumption made and continue rather than asking

---

## The 10 Supported Teams

| `data-theme` value | Team | Button Radius | Notes |
|---|---|---|---|
| `wolves` | Minnesota Timberwolves | 8px | Blue/green |
| `lynx` | Minnesota Lynx | 12px | Blue/green |
| `courage` | NC Courage | 100px (pill) | Red/gold |
| `summit` | Denver Summit FC | 8px | Green/red/yellow |
| `bucknell` | Bucknell Bison | 100px (pill) | Navy/orange |
| `sounders` | Seattle Sounders FC | 100px (pill) | Green/blue/teal |
| `reign` | Seattle Reign FC | 100px (pill) | Purple/gold |
| `ncfc` | NC Football Club | 100px (pill) | Blue/gold |
| `jump` | Jump Default | 100px (pill) | Purple/lime |
| `athletics` | Las Vegas Athletics | 100px (pill) | Green/yellow |


---

## How Theming Works

Two HTML attributes on `<html>` control everything:

```html
<html data-theme="wolves" data-mode="dark">
```

Changing either attribute updates the entire UI automatically via CSS custom properties. Never hardcode colors, fonts, or spacing values.

---

## CSS File Architecture

### Source of Truth

**The local files in this repo are the source of truth.** Edit CSS files directly here and push to `main` — Vercel auto-deploys from the root directory (all root-level `.css`, `.html`, font, and JSON files are served as-is).

The live URL (`https://diet-air-ds.vercel.app/`) reflects what has been deployed. Fetch from there only to verify what's currently live versus what's in local files — never treat it as the edit target.

**Critical exception:** The block between `/* SYNC:START */` and `/* SYNC:END */` in `design-tokens-master.css` is auto-generated by `npm run teams`. Never edit that block manually — it will be overwritten on the next Sanity sync.

### Load Order (Critical — later files depend on earlier ones)

```html
<!-- Google Fonts — always include both -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&display=swap" rel="stylesheet">

<!-- Design System — exact order matters -->
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/design-tokens-master.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/spacing-tokens.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/container-tokens.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/border-effects-tokens.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/fonts.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/text-styles-system.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/icons.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/card-components.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/interactive-tokens.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/button-components.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/list-row-components.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/input-components.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/tag-chip-components.css">
<link rel="stylesheet" href="https://diet-air-ds.vercel.app/boilerplate.css">
```

**In-repo HTML files** use `<script src="ds-loader.js"></script>` (or `../ds-loader.js` from subdirectories) instead of the individual `<link>` tags above. The loader automatically uses local files on localhost/file:// and the Vercel CDN when deployed.

### What Each File Does

| # | File | Purpose |
|---|---|---|
| 1 | `design-tokens-master.css` | Core colors, brand colors per team, semantic tokens |
| 2 | `spacing-tokens.css` | 8px grid spacing scale (`--spacing-25` through `--spacing-1000`) |
| 3 | `container-tokens.css` | Max-width container classes (640px–1600px) |
| 4 | `border-effects-tokens.css` | Border radius, border weight, shadow tokens |
| 5 | `fonts.css` | `@font-face` for all team display fonts (hosted on Vercel) |
| 6 | `text-styles-system.css` | Typography classes (display, title, label, body) |
| 7 | `icons.css` | Material Symbols Rounded icon tokens and utilities |
| 8 | `card-components.css` | Card layout patterns and grid classes |
| 9 | `interactive-tokens.css` | Surface styles (12 types) + scale transforms (3 levels) |
| 10 | `button-components.css` | Button system: 8 types, 3 sizes, icon/circle variants |
| 11 | `list-row-components.css` | List row system: 3-slot architecture + subcomponents |
| 12 | `input-components.css` | Text inputs, select dropdowns, all states |
| 13 | `tag-chip-components.css` | Tag and chip component styles |
| 14 | `boilerplate.css` | CSS reset, layout helpers, spacing utilities, grid |

---

## Directory Structure

```
diet-airDS/
├── *.css                     # All CSS source files — edit these directly
├── *.html                    # Demo and walkthrough pages
├── design-tokens-master.css  # Core token file — contains SYNC block (do not manually edit that section)
├── walkthrough.html          # Live token/component reference
├── teams/                    # Per-team JSON configs (auto-generated by npm run teams)
├── fonts/                    # Team display fonts (woff/woff2) — served via Vercel CDN
├── images/                   # Team logos and other images
├── scripts/                  # Sanity sync scripts (Node.js ESM)
├── studio/                   # Sanity Studio — separate app, not part of the CSS system
├── examples/                 # Example pages (checkout, fan-stats, chat, etc.)
└── appendix/                 # Reference docs, old guides — not deployed as components
```

---

## Local Development & Deployment

**No dev server needed.** This is a static system — open any `.html` file directly in a browser to preview.

### Commit & Deploy Policy

Never suggest `git add`, `git commit`, or `git push`. The user manages all commits and Vercel deployments manually. Edit files and flag what changed — stop there.

### Deploy workflow
Edit local files → `git push origin main` → Vercel auto-deploys. Changes to CSS files are live within seconds of deployment.

### Sanity sync
Team brand data (colors, logos, display fonts, button radius) lives in Sanity and syncs to this repo:

```bash
npm run teams   # Fetch all teams from Sanity → writes teams/*.json + updates design-tokens-master.css
```

Requires a `.env` file in the project root:
```
SANITY_PROJECT_ID=your_project_id
SANITY_DATASET=production
```

The sync writes per-team JSON to `teams/` and regenerates the `[data-theme]` CSS blocks in `design-tokens-master.css` between the `SYNC:START` / `SYNC:END` markers.

### Adding new tokens
When the existing scale doesn't cover a needed value:
1. Add the token to the appropriate CSS file (e.g. new spacing → `spacing-tokens.css`)
2. Follow existing naming conventions: `--spacing-[scale]`, `--border-radius-[scale]`, etc.
3. Never hardcode a one-off value inline — always extend the token system
4. Flag any new token names before committing — token names are permanent API surface

---

## Design Token Quick Reference

### Color Tokens — Semantic (Always Use These)

**Backgrounds:**
- `--bg-base` — Main page background
- `--bg-surface` — Cards, elevated surfaces
- `--bg-sheet` — Modals, highest elevation
- `--bg-nav` — Navigation bars (with blur)
- `--bg-input` — Input field background (#FFFFFF light, transparent dark)

**Text:**
- `--text-primary` — Body text (high contrast)
- `--text-secondary` — Supporting text (medium contrast)
- `--text-disabled` — Disabled state
- `--text-placeholder` — Input placeholders

**Brand:**
- `--brand-core` — Primary team color
- `--brand-light` — Secondary team color
- `--brand-dark` — Dark team variant
- `--brand-interactive` — ⚠️ Use this for links, active states, focus rings (see critical gotcha below)
- `--brand-inverted` — Complementary accent color

**Interactive:**
- `--interactive-primary` / `--interactive-primary-text` — Primary buttons
- `--interactive-transactional` / `--interactive-transactional-text` — Transactional buttons
- `--interactive-secondary-text` — Secondary/outlined button text
- `--interactive-tertiary-text` — Tertiary/ghost button text

**Borders:**
- `--border-default` — Standard borders
- `--border-hover` — Hover state borders
- `--border-active` — Active/focused borders
- `--border-disabled` — Disabled borders

**Status:**
- `--status-success` — Success states (green)
- `--status-warning` — Warning states (amber)
- `--status-error` — Error/destructive states (red)
- `--status-info` — Informational states (blue)

### Spacing Scale (8px grid)

| Token | Value |
|---|---|
| `--spacing-25` | 2px |
| `--spacing-50` | 4px |
| `--spacing-100` | 8px |
| `--spacing-150` | 12px |
| `--spacing-200` | 16px |
| `--spacing-250` | 20px |
| `--spacing-300` | 24px |
| `--spacing-400` | 32px |
| `--spacing-500` | 40px |
| `--spacing-600` | 48px |
| `--spacing-700` | 56px |
| `--spacing-800` | 64px |
| `--spacing-900` | 72px |
| `--spacing-1000` | 80px |

**Spacing utility classes:** `.mb-N` `.mt-N` `.p-N` `.py-N` `.px-N` (where N is the token scale, e.g. `.mb-200`)

**Responsive semantic tokens** (prefer these for layout over fixed tokens):

| Token | Mobile | Tablet | Desktop | Use For |
|---|---|---|---|---|
| `--spacing-row` | 8px | 12px | 16px | Gap between rows/stacked items |
| `--spacing-card` | 16px | 20px | 24px | Gap between cards |
| `--spacing-content` | 32px | 40px | 48px | Gap between major sections |
| `--margin-small` | 16px | 32px | 48px | Page horizontal margin (dense UI) |
| `--margin-large` | 16px | 40px | 64px | Page horizontal margin (standard) |
| `--margin-landing` | 24px | 48px | 80px | Page horizontal margin (open layouts) |

**CSS utility classes for responsive spacing:**
- `.py-large` — Vertical padding using `--margin-large` scale (16px → 64px)
- `.py-landing` — Vertical padding using `--margin-landing` scale (24px → 80px)
- `.gap-card` — Gap using `--spacing-card` scale (16px → 24px)

### Containers

| Class | Max Width | Use For |
|---|---|---|
| `.container-maximum` | 1600px | Full-width landing layouts |
| `.container-extra-wide` | 1440px | Dashboards |
| `.container-wide` | 1280px | Standard pages with sidebars |
| `.container` | 1200px | Default |
| `.container-medium` | 1024px | Article pages, forms |
| `.container-narrow` | 768px | Reading content, centered forms |
| `.container-compact` | 640px | Single column content |

### Border Tokens

- `--border-radius-50` — 4px
- `--border-radius-100` — 8px
- `--border-radius-200` — 16px
- `--button-border-radius` — Per-team (8px, 12px, or 100px)
- `--border-weight-50` — 1px (subtle)
- `--border-weight-100` — 1px (standard)
- `--border-weight-200` — 2px (heavy/active)
- `--shadow-sheet-a/b` — Mobile card/sheet shadows
- `--shadow-modal-a/b` — Desktop modal shadows

---

## Typography System

### Text Classes

**Display** (team display font, varies per team):
`.display900` `.display800` `.display700` `.display600` `.display500` `.display400` `.display300` `.display200` `.display100`

**Title** (Inter Bold 700):
`.title90` (36px) `.title80` (32px) `.title70` (28px) `.title60` (24px) `.title50` (20px)

**Label Bold** (Inter 600):
`.labelBold50` (20px) `.labelBold40` (18px) `.labelBold30` (16px) `.labelBold20` (14px) `.labelBold10` (12px)

**Label Regular** (Inter 400):
`.labelRegular50` `.labelRegular40` `.labelRegular30` `.labelRegular20` `.labelRegular10`

**Body Regular** (Inter 400, larger line-height):
`.bodyRegular50` `.bodyRegular40` `.bodyRegular30` `.bodyRegular20` `.bodyRegular10`

### Text Color Utilities
`.text-primary` `.text-secondary` `.text-disabled` `.text-placeholder`
`.text-brand-core` `.text-brand-light` `.text-brand-interactive` `.text-brand-inverted`
`.text-inverted` `.text-success` `.text-warning` `.text-error` `.text-info`

### Text Pairs

Text pairs combine label + sublabel at the correct scale. Use `.card-text-pair` as wrapper (flex column, 2px gap).

| Scale | Label Class | Sublabel Class | Use For |
|---|---|---|---|
| 9000 | `display600` | `labelRegular50` | Hero sections |
| 8000 | `display400` | `labelRegular40` | Large cards |
| 7000 | `title70` | `labelRegular30` | Section headers |
| 6000 | `title60` | `labelRegular20` | Card headers |
| 5000 | `title50` | `labelRegular20` | Medium cards |
| 4000 | `labelBold40` | `labelRegular20` | Standard cards |
| 3000 | `labelBold30` | `labelRegular10` | Compact list items |
| 2000 | `labelBold20` | `labelRegular10` | Dense lists |
| 1000 | `labelBold10` | `labelRegular10` | Smallest metadata |

**⚠️ In list rows: use `.list-row-text-pair` not `.card-text-pair`** — different spacing/scale.

---

## Component Systems

### Icons — Material Symbols Rounded

```html
<span class="icon">home</span>                    <!-- 24px outlined (default) -->
<span class="icon icon-400">star</span>           <!-- 32px outlined -->
<span class="icon icon-filled">favorite</span>    <!-- 24px filled -->
<span class="icon icon-300 icon-filled">check</span>  <!-- 24px filled -->
```

Icon sizes: `.icon-100` (16px) `.icon-200` (20px) `.icon-300` (24px) `.icon-400` (32px) `.icon-500` (40px) `.icon-600` (48px)

### Buttons

```html
<!-- Structure: btn + type + size -->
<button class="btn btn-transactional btn-700">Buy Tickets</button>
<button class="btn btn-primary btn-300">Save</button>
<button class="btn btn-secondary btn-300">Cancel</button>
<button class="btn btn-tertiary btn-100">Learn More</button>

<!-- With leading icon -->
<button class="btn btn-primary btn-300 btn-icon-leading">
  <span class="btn-icon material-symbols-rounded">add</span>
  <span>Add Item</span>
</button>

<!-- With trailing icon, full width -->
<button class="btn btn-transactional btn-700 btn-icon-trailing btn-fill">
  <span>Buy Tickets</span>
  <span class="btn-icon material-symbols-rounded">arrow_forward</span>
</button>

<!-- Button groups -->
<div class="btn-group">
  <button class="btn btn-primary btn-300">Save</button>
  <button class="btn btn-secondary btn-300">Cancel</button>
</div>
<div class="btn-group-stack">
  <button class="btn btn-transactional btn-700 btn-fill">Buy Tickets</button>
  <button class="btn btn-secondary btn-700 btn-fill">Learn More</button>
</div>

<!-- Circle icon button: btn-circle + size + type -->
<button class="btn-circle btn-circle-300 btn-circle-neutral">
  <span class="btn-icon material-symbols-rounded">close</span>
</button>
```

**Button types (in priority order):** `btn-transactional` `btn-primary` `btn-neutral` `btn-secondary` `btn-tertiary` `btn-destructive` `btn-white` `btn-white-tertiary`

**Button sizes:** `btn-700` (large — 56px) `btn-300` (small — 40px) `btn-100` (x-small — 32px)

**Width/icon modifiers:** `btn-fill` (full width) · `btn-icon-leading` · `btn-icon-trailing`

**Circle button types:**
- Fill: `btn-circle-team` · `btn-circle-neutral` · `btn-circle-inverted` · `btn-circle-black` · `btn-circle-white` · `btn-circle-destructive`
- Outlined (`-secondary` suffix): `btn-circle-team-secondary` · `btn-circle-neutral-secondary` · `btn-circle-destructive-secondary`
- Ghost (`-tertiary` suffix): `btn-circle-team-tertiary` · `btn-circle-neutral-tertiary` · `btn-circle-destructive-tertiary`

**Circle button sizes:** `btn-circle-700` (56×56px, 32px icon) · `btn-circle-300` (40×40px, 24px icon)

**Never hand-roll buttons.** The `.btn` system handles all hover/press states, color inheritance, scale transforms, and theme compatibility automatically.

### Interactive Surfaces

Surface classes set background, border, and text color together:

```html
<!-- Fill surfaces (set bg + text color) -->
<div class="surface-fillNeutral scale-500">...</div>
<div class="surface-fillColor scale-500">...</div>    <!-- brand color fill -->
<div class="surface-fillInverted scale-500">...</div>
<div class="surface-fillBlack scale-500">...</div>
<div class="surface-fillWhite scale-500">...</div>

<!-- Border surfaces -->
<div class="surface-borderNeutral scale-700">...</div>
<div class="surface-borderInverted scale-500">...</div>

<!-- Subtle surfaces -->
<div class="surface-washNeutral scale-700">...</div>
<div class="surface-ghost scale-500">...</div>
<div class="surface-card scale-700">...</div>
```

**Scale classes** (attach to any interactive element):
- `.scale-700` — Cards, large components (hover 1.01, press 0.99)
- `.scale-500` — Buttons, medium (hover 1.025, press 0.975)
- `.scale-300` — Icon buttons, small (hover 1.035, press 0.965)

### List Rows — 3-Slot Architecture

```html
<div class="list-row">
  <!-- Slot 1: Leading -->
  <div class="leading leading-gap-lg">
    <img class="leading-image-small" src="..." alt="...">
    <!-- OR: icon, avatar, etc. -->
  </div>

  <!-- Slot 2: Main Content -->
  <div class="list-row-content">
    <div class="list-row-text-pair">
      <span class="labelBold30">Primary Label</span>
      <span class="labelRegular10 text-secondary">Sublabel</span>
    </div>
  </div>

  <!-- Slot 3: Trailing -->
  <div class="trailing trailing-gap-sm">
    <div class="trailing-text-pair">
      <span class="labelBold30">$120</span>
      <span class="labelRegular10 text-secondary">each</span>
    </div>
    <!-- OR: button, chevron, switch, etc. -->
  </div>
</div>
```

**Leading gap modifiers** (gap between leading element and content):
- `.leading-gap-sm` — 8px — logos
- `.leading-gap-md` — 12px — icons, circles, select boxes
- `.leading-gap-lg` — 16px — square or small images
- `.leading-gap-xl` — 24px — large images

**Trailing gap modifiers** (gap between content and trailing element):
- `.trailing-gap-xs` — 2px — chevron/arrow icon
- `.trailing-gap-sm` — 4px — text pair
- `.trailing-gap-md` — 8px — text link
- `.trailing-gap-lg` — 12px — button

**Leading image classes:** `.leading-image-square` (80×80) `.leading-image-small` (136×80) `.leading-image-large` (244×124)

**Row states:** default (tappable) · `.not-tappable` · `.disabled` (30% opacity)

**Subcomponents available inside list rows:**
- `.tag` / `.tag-group` — Label badges
- `.info-block` — Stat-style info
- `.status-dot` — Colored status indicator
- `.switch` — iOS-style toggle (use native checkbox inside)
- `.stepper` — Quantity increment/decrement

**Never use `.card-text-pair` inside list rows — always use `.list-row-text-pair`.**

### Selector

A clickable tile wrapper for list rows — used when a list item needs to be selectable (e.g. seat/section picker). Two variants depending on the parent background:

| Variant | Surface class | Use when |
|---|---|---|
| Wash | `surface-washNeutral` | Inside a card / on `--bg-surface` — nearly transparent at rest |
| Card | `surface-card` | On page background (`--bg-base`) — `--bg-surface` at rest, looks like a card |

```html
<!-- Wash variant (inside a card / on --bg-surface) -->
<div class="selector surface-washNeutral scale-700">
  <div class="list-row">...</div>
</div>

<!-- Card variant (on --bg-base, looks like a card in a list) -->
<div class="selector surface-card scale-700">
  <div class="list-row">...</div>
</div>

<!-- Selected (works with either variant) -->
<div class="selector surface-washNeutral scale-700 is-selected">
  <div class="list-row">...</div>
</div>

<!-- Disabled (omit scale-700) -->
<div class="selector surface-washNeutral is-disabled">
  <div class="list-row">...</div>
</div>
```

| State class | Visual |
|---|---|
| *(none)* | Resting bg from surface class (wash = near-transparent, card = `--bg-surface`) |
| *:hover* | Surface hover overlay |
| *:active* | Surface press overlay + `scale-700` shrink (0.99) |
| `.is-selected` | `--neutral-1000` solid fill, inverted text — overrides both surface variants |
| `.is-disabled` | 25% opacity, non-interactive — omit `scale-700` |

**Notes:**
- `.selector` is structural only — provides `border-radius` and `padding`. Surface + scale classes provide all interaction behavior.
- `.selector` handles its own 16px padding — do not add a padding wrapper around it.
- The list row sits directly inside `.selector` with no extra div.
- All child text (including `.text-secondary`) automatically inherits the inverted color in selected state.

### Event Row — Buy Flow

Buy-flow card for a single game event. Opposing team logo + event info + offer state. Uses `--bg-surface` background with 16px radius. Text and padding scale up responsively at ≥500px.

**Offer states:**

| State | Top trailing | Bottom section |
|---|---|---|
| Featured Only | `btn btn-primary btn-100` price | — |
| Featured + Others | price button | "X Additional Offers" + `arrow_drop_down` |
| No Featured Offers | — | "X Offers Available" + `arrow_drop_down` |
| Sold Out | `labelBold30 text-secondary` "Sold Out" | — |
| Coming Soon | `labelBold20 text-interactive-tertiary event-row-coming-soon` | — |

**Surface tokens:**
- `.event-row` background (`--org-surface`) is built into the component CSS — no wrapper surface token needed
- `surface-section` on any section with interactive content → transparent hover/press overlay over the card background
- Non-interactive sections: no surface class. No `scale-*`.

| State | `surface-section` on |
|---|---|
| Featured Only | `.event-row-top` |
| Featured + Others | `.event-row-top` + `.event-row-bottom` |
| No Featured Offers | `.event-row-bottom` only |
| Sold Out / Coming Soon | neither |

```html
<!-- Featured and Others (most complete variant) -->
<div class="event-row">
  <div class="event-row-top surface-section">
    <div class="list-row">
      <div class="leading leading-gap-sm">
        <img class="event-row-logo" src="{opponent.logoUrl}" alt="{opponent.name}">
      </div>
      <div class="list-row-content">
        <div class="list-row-text-pair">
          <span class="event-row-label">Portland Marmots</span>
          <span class="event-row-sublabel text-secondary">Tuesday, Oct 8 · 7 PM</span>
        </div>
      </div>
      <div class="trailing trailing-gap-lg">
        <button class="btn btn-primary btn-100">$19+</button>
      </div>
    </div>
  </div>
  <div class="event-row-bottom surface-section">
    <div class="list-row">
      <div class="list-row-content">
        <div class="list-row-text-pair">
          <span class="labelBold30 text-interactive-tertiary">3 Additional Offers</span>
        </div>
      </div>
      <div class="trailing trailing-gap-xs">
        <span class="icon material-symbols-rounded text-interactive-tertiary">arrow_drop_down</span>
      </div>
    </div>
  </div>
</div>

<!-- List container -->
<div class="event-row-list">
  <div class="event-row">...</div>
</div>
```

**Logo:** 48×48, `object-fit: contain`. Source: `opposingTeam.logo.asset->url` from Sanity.
**Not-tappable states:** add `.not-tappable` to `.list-row` for Sold Out, Coming Soon, and No Featured Offers top sections.

Demo: `examples/event-row-demo.html`

### Input Fields

```html
<!-- Text input -->
<div class="input-field">
  <div class="input-label-row">
    <label class="labelBold20">Field Label</label>
  </div>
  <div class="input-and-message">
    <div class="input-control">
      <input type="text" placeholder="Placeholder text">
    </div>
    <span class="labelRegular10 text-secondary">Helper message</span>
  </div>
</div>

<!-- Select dropdown -->
<div class="input-field input-select" id="select-1">
  <div class="input-and-message">
    <div class="input-control">
      <span class="input-select-display is-placeholder" id="sel-1-display">Choose an option</span>
      <span class="input-select-chevron material-symbols-rounded">arrow_drop_down</span>
      <select id="sel-1"
        onchange="syncSelect('select-1', 'sel-1-display', this)"
        onfocus="openSelect('select-1')"
        onblur="closeSelect('select-1')">
        <option value="" disabled selected>Choose an option</option>
        <option value="1">Option 1</option>
      </select>
    </div>
  </div>
</div>
```

**State modifier classes** on `.input-field`: `.is-error` `.is-disabled` `.has-value`

**Select dropdowns use `arrow_drop_down` icon, NOT `expand_more`.**

### Tile — Universal Small Card

The recommended pattern for any small card displayed alongside others. Use for event listings, product grids, schedules, and content feeds. Use `card-closed` / `card-open` for full-width or single-column cards.

**Placement contexts:**
- **Grid** (desktop/tablet): `card-grid` with column modifiers
- **Carousel** (mobile-first): horizontal scroll row — tiles in a carousel must all share the same interaction pattern (all tap targets or all with buttons — never mixed)
- **Inside `card-open`**: tiles as content within a larger open-layout card

**⚠️ Interactivity rule — pick one, never both, never mixed in a grid/carousel:**
- No button → tile is the tap target: add `surface-card scale-700` to `.tile`
- Has button → button is the CTA: `.tile` has no surface/scale classes

```html
<!-- No button — tile is the tap target -->
<div class="tile surface-card scale-700">
  <div style="height: 120px;">
    <div class="matchup">
      <div class="matchup-panel" style="--badge-bg: ${away.primaryColor ?? 'var(--neutral-200)'};">
        <img src="${away.logoUrl}" alt="${away.name}">
      </div>
      <div class="matchup-panel">
        <img src="home-logo.svg" alt="Home Team">
      </div>
    </div>
  </div>
  <div class="tile-info">
    <div class="card-text-pair">
      <span class="labelBold30">vs. Away Team</span>
      <span class="labelRegular10 text-secondary">Sat, Mar 15 · 7:00 PM</span>
    </div>
    <span class="labelBold20 text-success">From $45</span>
  </div>
</div>

<!-- Has button — button is the CTA -->
<div class="tile">
  <div style="height: 120px;">...</div>
  <div class="tile-info">
    <div class="card-text-pair">...</div>
    <span class="labelBold20 text-success">From $45</span>
    <button class="btn btn-primary btn-100">Buy Tickets</button>
  </div>
</div>

<!-- Grid -->
<div class="card-grid grid-cols-3-desktop grid-cols-2-tablet grid-cols-1-mobile">
  <div class="tile surface-card scale-700">...</div>
  <div class="tile surface-card scale-700">...</div>
</div>

<!-- Carousel -->
<div style="display: flex; gap: var(--spacing-card); overflow-x: auto;">
  <div class="tile surface-card scale-700" style="min-width: 200px; flex-shrink: 0;">...</div>
</div>
```

**Optional elements inside `.tile-info`:**
- `<span class="labelBold20 text-success">From $45</span>` — price
- `<button class="btn btn-primary btn-100">...</button>` — CTA (determines interactivity)
- `.tile-tag` — frosted glass label absolutely positioned top-left over the visual header

### Cards

```html
<!-- Closed card (fixed height, no overflow) -->
<div class="card card-closed">...</div>

<!-- Open card (height fits content) -->
<div class="card card-open">...</div>

<!-- Interactive card (has hover/press states) -->
<div class="card card-interactive scale-700">...</div>
```

**Card grid:**
```html
<div class="card-grid">
  <div class="card card-open">...</div>
  <div class="card card-open">...</div>
</div>
```

---

## Decision Gate — Check Before Writing Any CSS

**⚠️ Pre-check — does this element need hover, press, or active behavior?**
Any tappable or clickable element that isn't a button, list row, or input → reach for `.surface-*` + `.scale-*` first (step 11 below). If you're about to write `:hover { background: ... }` or `:active { transform: ... }` — stop. Use a surface class instead.

Before writing any custom CSS, check this list in order:

1. Button → `.btn` + type + size. **Stop.**
2. List row → `.list-row` 3-slot structure. **Stop.**
3. Selectable list row → `.selector.surface-washNeutral.scale-700` wrapping `.list-row`. **Stop.**
4. Buy-flow event card → `.event-row` + `.event-row-top` + optional `.event-row-bottom`. **Stop.**
5. Small card in a grid, carousel, or open card → `.tile` + interactivity rule. **Stop.**
6. Text input → `.input-field` structure. **Stop.**
7. Select dropdown → `.input-field.input-select` structure. **Stop.**
8. Tag/chip → `.tag` + modifiers. **Stop.**
9. Switch → `.switch > input + label`. **Stop.**
10. Card → `.card-closed` / `.card-open` / `.card-interactive`. **Stop.**
11. Typography → text style class (`.labelBold30`, `.title50`, etc.). **Stop.**
12. Spacing → spacing token (`var(--spacing-200)`) or utility (`.mb-200`). **Stop.**
13. Interactive surface → `.surface-*` + `.scale-*`. **Stop.**
14. None of the above → minimal custom CSS using tokens only.

**Never:**
- Write custom CSS for any component in steps 1–12
- Hardcode any color (`#`, `rgb()`, `hsl()`)
- Hardcode spacing in `px`, `em`, or `rem`
- Set `font-size`, `font-weight`, or `line-height` manually
- Use `--color-interactive` or `--color-inverted` directly
- Write `:hover` or `:active` CSS for interactive components — use `.surface-*` + `.scale-*` instead
- Wrap a label+sublabel pair without `.card-text-pair` (or `.list-row-text-pair` in list rows)
- Add a border to a card. `--bg-surface` vs `--bg-base` is the boundary — no `border` needed.

---

## Critical Gotchas — Read Before Writing Any CSS

### 0. Multi-Section Cards: Use `surface-section` for Interactive Sections

When a card has sections (e.g. `.event-row-top` / `.event-row-bottom`), the card background is built into the component CSS — no surface token on the wrapper. Interactive sections get `surface-section`, which provides a transparent hover/press overlay. Its `:active` state is scoped to `> *` (direct child only), so pressing one section never bleeds into adjacent sections.

- **`.event-row`** — no surface class needed; `background: var(--org-surface)` is intrinsic to the CSS
- **`surface-section`** on each interactive section → transparent at rest, `--white-100` hover, `--black-300` press + 60% child opacity
- Non-interactive sections → no surface class
- **No `scale-*`** — scale on only part of a card unit creates inconsistent motion

```html
<!-- ❌ WRONG — surface-card on sections changes background color on hover,
     and scale on one section of a card unit looks wrong -->
<div class="event-row">
  <div class="event-row-top surface-card scale-700">...</div>
  <div class="event-row-bottom surface-card scale-700">...</div>
</div>

<!-- ✅ CORRECT — background intrinsic to .event-row CSS; surface-section on interactive sections -->
<div class="event-row">
  <div class="event-row-top surface-section">...</div>    <!-- interactive -->
  <div class="event-row-bottom surface-section">...</div> <!-- interactive -->
</div>

<!-- ✅ CORRECT — non-interactive sections get no surface class -->
<div class="event-row">
  <div class="event-row-top">...</div>                    <!-- not interactive -->
  <div class="event-row-bottom surface-section">...</div> <!-- interactive -->
</div>
```

### 1. Surface Tokens vs. Text Style Classes (Most Common Bug)

**The problem:** Surface fill classes (`.surface-fillNeutral`, `.surface-fillColor`, etc.) set their own `color` for correct contrast. Text style classes (`.labelBold30`, `.bodyRegular20`, etc.) also set `color: var(--text-primary)` explicitly. CSS specificity means the child class wins, overriding the surface's color — resulting in invisible text (white-on-white or black-on-black).

**The fix:** Add `color: inherit` on children inside any surface-colored container.

```html
<!-- ❌ WRONG — text becomes invisible on surface-fillNeutral in dark mode -->
<div class="surface-fillNeutral scale-500">
  <span class="labelBold30">Buy Tickets</span>
</div>

<!-- ✅ CORRECT -->
<style>
  .surface-fillNeutral *, .surface-fillColor *,
  .surface-fillInverted *, .surface-fillBlack *, .surface-fillWhite * {
    color: inherit;
  }
</style>
<div class="surface-fillNeutral scale-500">
  <span class="labelBold30">Buy Tickets</span>
</div>
```

Note: `.btn` classes already handle this internally — `btn *` sets `color: inherit`. Only surfaces you compose manually need this fix.

### 2. Never Use `--color-interactive` or `--color-inverted` Directly

These are raw per-team static values. In dark mode, `--color-interactive` stays as the light-mode brand color, causing contrast failures.

```html
<!-- ❌ WRONG -->
<a style="color: var(--color-interactive);">Learn More</a>

<!-- ✅ CORRECT — these swap automatically between light and dark -->
<a class="text-brand-interactive">Learn More</a>
<a style="color: var(--brand-interactive);">Learn More</a>
```

`--brand-interactive` and `--brand-inverted` are the mode-aware versions. Always use those.

### 3. card-text-pair vs. list-row-text-pair

These are different components with different spacing and scale. Using the wrong one inside a list row breaks the visual hierarchy.

```html
<!-- ❌ WRONG inside a list row -->
<div class="card-text-pair">...</div>

<!-- ✅ CORRECT inside a list row -->
<div class="list-row-text-pair">...</div>
```

### 4. Never Build Custom Buttons, List Rows, or Inputs

Always use the component classes. Hand-rolling these breaks hover states, dark mode, and cross-team compatibility.

### 5. Safari iOS Font Loading

Safari iOS requires absolute URLs in cross-origin stylesheets. When referencing fonts from a hosted stylesheet, always use the full `https://diet-air-ds.vercel.app/fonts/...` path, not relative paths. Also avoid `font-style: oblique` declarations — Safari interprets these differently than other browsers.

### 6. Spacing Tokens vs. Custom Values

Always extend the token system instead of using custom values. For example, a 2px gap uses `--spacing-25: 2px`, not an inline `gap: 2px`. When a Figma spec doesn't align with the existing scale, add a new token rather than hardcoding.

### 7. `.sublabel` always needs `.text-secondary`

```html
<!-- ❌ WRONG -->
<span class="labelRegular10">Row F</span>

<!-- ✅ CORRECT -->
<span class="labelRegular10 text-secondary">Row F</span>
```

### 8. Shadows are reserved for sheets and modals only

Do not apply shadow tokens to cards, list rows, or general components. `--shadow-sheet-a/b` and `--shadow-modal-a/b` are exclusively for overlay surfaces.

### 9. Stepper disabled state uses a class, not an attribute

```html
<!-- ❌ WRONG — HTML disabled attribute doesn't style correctly -->
<button class="stepper-btn" disabled>...</button>

<!-- ✅ CORRECT — use the .disabled class -->
<button class="stepper-btn disabled">...</button>
```

### 10. Switch requires matching id/for

The toggle won't work if the `<input>` `id` and `<label>` `for` don't match exactly. Silent failure.

```html
<div class="switch">
  <input type="checkbox" id="my-switch">
  <label for="my-switch"></label>
</div>
```

### 11. List rows need a padding/border wrapper — `.list-row` has none

`.list-row` doesn't include padding or dividers. Wrap each row:

```html
<div style="padding: var(--spacing-150) var(--spacing-200); border-bottom: 1px solid var(--border-default);">
  <div class="list-row">...</div>
</div>
```

### 12. JS helpers are required for inputs with clear buttons or selects

Include these in any page that uses `.input-select` or clear buttons:

```javascript
function syncHasValue(fieldId, input) {
  document.getElementById(fieldId).classList.toggle('has-value', input.value.trim() !== '');
}
function clearInput(fieldId, inputId) {
  const field = document.getElementById(fieldId);
  const input = document.getElementById(inputId);
  input.value = '';
  field.classList.remove('has-value', 'is-error');
  input.focus();
}
function syncSelect(fieldId, displayId, selectEl) {
  const display = document.getElementById(displayId);
  const chosen = selectEl.options[selectEl.selectedIndex];
  display.textContent = chosen.text;
  display.classList.toggle('is-placeholder', !chosen.value);
}
function openSelect(fieldId) { document.getElementById(fieldId).classList.add('is-open'); }
function closeSelect(fieldId) { document.getElementById(fieldId).classList.remove('is-open'); }
```

---

## Working with Figma

### File Key
The primary Figma file key is `qtyb4i4QNogTd8TJ4F6IMX`.

### Workflow When Analyzing Figma Specs

These are **MCP tool calls** — invoke them directly as tools, not as web fetches.

1. **`get_metadata`** — Ground truth dimensions and node IDs for a frame
2. **`get_design_context`** — Understand structure, tokens, and component relationships
3. **`get_screenshot`** — Visual verification of what was built

### Spacing Priority

When reading Figma specs:
- Prioritize Figma spacing measurements over assumptions
- Map Figma measurements to the nearest token (e.g., 16px → `--spacing-200`)
- If a Figma value doesn't map cleanly to an existing token, say so and ask before extending the system
- Never silently use a hardcoded value when a token doesn't exist — flag the discrepancy

### Name Discrepancies

If a Figma component name doesn't match the CSS class name, always flag it and ask which is correct rather than assuming.

### Known Token Discrepancies (CSS vs Figma) — Do Not "Fix" These

These differences between `design-tokens-master.css` and the Figma "Colors & Modes" variable collection are **intentional or too minor to change**. Do not sync them.

| Token | CSS value | Figma value | Reason — leave as-is |
|---|---|---|---|
| `--border-default` (via `--neutral-200`) | rgba(0,0,0,**0.10**) light / rgba(255,255,255,**0.15**) dark | rgba(0,0,0,**0.20**) light / rgba(255,255,255,**0.25**) dark | **Intentional platform split.** Figma value is calibrated for iOS native borders, which render thinner. Web CSS value (10%/15%) is correct for web. |
| `--text-secondary` (via `--neutral-700`) dark mode | rgba(255,255,255,**0.75**) | Figma `Text/text700` dark = rgba(255,255,255,**0.70**) | Minor 5% opacity delta. Not perceptible in practice. Monitor but do not change. |

All other neutral scale tokens (`--neutral-000` through `--neutral-1000`), inverted scale, and org/brand tokens are in full parity with Figma.

---

## Backend / CMS

The project uses **Sanity CMS** as a headless backend for team-specific configuration. Webhooks are active and working.

**What Sanity manages:**
- Team logos
- Brand colors (source of truth → syncs to CSS tokens)
- VFS (venue/fan seat view) images
- Venue information
- Team-specific URLs

**Architecture intent:** Sanity is the single source of truth for brand configuration. Changes in Sanity propagate via webhooks to both JSON files and CSS token generation. This avoids manual file editing for team-specific customization.

A custom frontend for Sanity (diet-air-ds-branded admin UI) is under consideration as a future project.

---

## Coding Principles for This Project

1. **Design tokens are the source of truth.** Never hardcode a color, size, or spacing value.
2. **Composability over rigidity.** Build by combining existing tokens and component classes, not creating new CSS from scratch.
3. **Tokens first, custom CSS last.** If something can be done with an existing class, use it. Only write custom CSS when no token or utility exists.
4. **Every component must work across all 10 teams in both modes.** Test wolves/light and athletics/dark as the two extreme cases.
5. **Local files are the source of truth.** Edit CSS here and push to deploy — never treat the Vercel URL as the edit target.
6. **When Figma and token scales conflict, flag it** — don't silently resolve it.
7. **Parent-to-child analysis.** When building new components, examine the full parent template first to understand hierarchy and relationships before building individual pieces.

---

## Key Files in This Repo

| File | Purpose |
|---|---|
| `agent-guide.md` | Complete build reference for AI agents — rules, patterns, examples, master prompt template |
| `text-pairs-guide.md` | Detailed text pair scale reference |
| `inventory-list-row.md` | Spec for the inventory/ticket list row component |
| `confluence-format-example.md` | Required format for any Confluence documentation output |
| `walkthrough.html` | Live interactive token/component reference (also at `https://diet-air-ds.vercel.app/walkthrough.html`) |
| `design-tokens-master.css` | All color tokens — read this to understand the full token shape |

---

## Documentation Formatting

When outputting documentation intended for Confluence, follow the syntax and formatting conventions in `confluence-format-example.md` exactly. This is required for proper copy-paste compatibility.

---

## Quick Decision Guide

| What you need | What to use |
|---|---|
| Any button | `.btn .btn-[type] .btn-[size]` |
| List item with slots | `.list-row` + 3-slot architecture |
| Selectable list item (on `--bg-surface`) | `.selector.surface-washNeutral.scale-700` wrapping `.list-row` |
| Selectable list item (on `--bg-base`) | `.selector.surface-card.scale-700` wrapping `.list-row` |
| Buy-flow event card (single game) | `.event-row` + `.event-row-top` + optional `.event-row-bottom` |
| Small card in grid / carousel / open card | `.tile` — no button → `surface-card scale-700`; has button → no surface/scale |
| Text input or select | `.input-field` system |
| Clickable card | `.card .card-interactive .scale-700` |
| Clickable non-button surface | `.surface-[type] .scale-[size]` + `color: inherit` on children |
| Brand color (mode-safe) | `--brand-interactive` / `--brand-inverted` |
| Brand color (static) | `--brand-core` / `--brand-light` / `--brand-dark` |
| Icon | `<span class="icon">icon_name</span>` |
| Icon filled | add `.icon-filled` class |
| Page vertical spacing | `.py-large` or `.py-landing` |
| Card grid gap | `.gap-card` |
| Fixed gap | `--spacing-[scale]` token |
