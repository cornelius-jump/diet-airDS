<!doctype html>
<html lang="en" data-theme="wolves" data-mode="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wolves Fan Preferences (Diet Air DS)</title>

    <!-- Google Fonts - Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap"
      rel="stylesheet"
    />

    <!-- (Optional) Material Symbols for icons -->
    <link
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@400;600&display=swap"
      rel="stylesheet"
    />

    <!-- Diet Air DS CSS Files (load in this order) -->
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/design-tokens-master.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/spacing-tokens.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/container-tokens.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/border-effects-tokens.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/fonts.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/text-styles-system.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/card-components.css" />
    <link rel="stylesheet" href="https://diet-air-ds.vercel.app/boilerplate.css" />

    <style>
      /* --- Minimal glue layout (token-based, no hardcoded spacing) --- */
      .inherit-text, .inherit-text * { color: inherit; }

      /* Guide note: filled surfaces set their own color; ensure children inherit. */
      .surface-fillNeutral *, .surface-fillColor *, .surface-fillInverted *,
      .surface-fillBlack *, .surface-fillWhite * { color: inherit; }

      .top-nav {
        background: var(--bg-nav);
        border-bottom: var(--border-weight-100) solid var(--border-default);
      }
      .top-nav-inner {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-200);
        padding-top: var(--spacing-200);
        padding-bottom: var(--spacing-200);
      }
      .brand {
        display: flex;
        align-items: center;
        gap: var(--spacing-200);
        min-width: 0;
      }
      .brand-mark {
        width: 40px;
        height: 40px;
        border-radius: var(--border-radius-100);
        background: linear-gradient(135deg, var(--brand-core), var(--brand-light));
        flex: 0 0 auto;
      }

      .grid { display: grid; }
      .gap-card { gap: var(--spacing-200); } /* matches DS utility intent */

      .two-col {
        display: grid;
        gap: var(--spacing-300);
      }
      @media (min-width: 720px) {
        .two-col { grid-template-columns: 1fr 1fr; }
      }

      .field { display: grid; gap: var(--spacing-150); }
      .divider {
        height: 1px;
        background: var(--border-default);
        margin: var(--spacing-300) 0;
      }

      .ds-input, .ds-select {
        width: 100%;
        background: var(--bg-base);
        color: var(--text-primary);
        border: var(--border-weight-100) solid var(--border-default);
        border-radius: var(--border-radius-100);
        padding: var(--spacing-200);
        outline: none;
      }
      .ds-input::placeholder { color: var(--text-placeholder); }
      .ds-input:focus, .ds-select:focus { border-color: var(--brand-interactive); }

      .tag-group { display: flex; flex-wrap: wrap; gap: var(--spacing-150); }
      .tag.is-selected {
        border-color: var(--brand-interactive);
        background: color-mix(in oklab, var(--brand-core) 18%, transparent);
      }
      .tag.tag-team-color { background: color-mix(in oklab, var(--brand-core) 16%, transparent); }

      .stepper {
        display: grid;
        gap: var(--spacing-150);
      }
      @media (min-width: 720px) {
        .stepper { grid-template-columns: repeat(5, 1fr); }
      }
      .stepper-item {
        background: transparent;
        border: var(--border-weight-100) solid var(--border-default);
        border-radius: var(--border-radius-100);
        padding: var(--spacing-200);
        text-align: left;
        display: grid;
        gap: 2px;
        cursor: pointer;
      }
      .stepper-item.is-active {
        border-color: var(--brand-interactive);
        background: color-mix(in oklab, var(--brand-core) 14%, transparent);
      }
      .stepper-item.is-done { opacity: 0.9; }

      .review-row {
        border: var(--border-weight-100) solid var(--border-default);
        border-radius: var(--border-radius-100);
        padding: var(--spacing-200);
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-200);
      }
      .review-row-main { min-width: 0; display: grid; gap: 2px; }

      .json-preview {
        margin-top: var(--spacing-250);
        padding: var(--spacing-300);
        background: var(--bg-base);
        border: var(--border-weight-100) solid var(--border-default);
        border-radius: var(--border-radius-100);
        overflow: auto;
      }

      [hidden] { display: none !important; }
      .material-symbols-outlined { font-variation-settings: "FILL" 0, "wght" 600, "GRAD" 0, "opsz" 24; }
    </style>
  </head>

  <body>
    <!-- Top nav -->
    <header class="top-nav">
      <div class="container-compact top-nav-inner">
        <div class="brand">
          <div class="brand-mark" aria-hidden="true"></div>
          <div class="card-text-pair">
            <div class="title50">Wolves Fan Profile</div>
            <div class="labelRegular20 text-secondary">Personalize tickets, content, and offers</div>
          </div>
        </div>
        <div>
          <button class="btn btn-white-tertiary btn-100" type="button">
            <span class="labelBold30">Sign in</span>
          </button>
        </div>
      </div>
    </header>

    <main class="container-compact py-large">
      <!-- Progress / stepper card -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300 mb-300">
        <div class="card-text-pair mb-200">
          <div class="title60" id="currentStepTitle">Basics</div>
          <div class="labelRegular20 text-secondary" id="currentStepSubtitle">Who you are</div>
        </div>

        <div class="surface-washNeutral surface-borderNeutral border-radius-300 p-200 mb-200">
          <div class="list-row-content">
            <div class="list-row-text-pair">
              <div class="labelBold30">Progress</div>
              <div class="labelRegular10 text-secondary" id="progressText">Step 1 of 5</div>
            </div>
          </div>
        </div>

        <div class="stepper" role="list" aria-label="Onboarding steps" id="stepper"></div>
      </section>

      <!-- STEP: Basics -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300" data-step="basics">
        <div class="card-text-pair mb-200">
          <div class="title60">Start your Wolves profile</div>
          <div class="labelRegular20 text-secondary">A few quick details, then we’ll tailor everything to you.</div>
        </div>

        <div class="grid gap-card">
          <div class="field">
            <label class="labelBold30" for="displayName">Display name</label>
            <input id="displayName" class="ds-input" placeholder="Naz Reid Enthusiast" />
          </div>

          <div class="field">
            <label class="labelBold30" for="homeCity">Home city</label>
            <input id="homeCity" class="ds-input" placeholder="Minneapolis, MN" />
          </div>

          <div class="field">
            <div class="labelBold30">Fan level</div>
            <div class="tag-group" role="group" aria-label="Fan level" id="fanLevelGroup">
              <!-- single-select tags -->
            </div>
          </div>
        </div>
      </section>

      <!-- STEP: Teams + Players -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300" data-step="teams" hidden>
        <div class="card-text-pair mb-200">
          <div class="title60">Teams and players</div>
          <div class="labelRegular20 text-secondary">We’ll use this to personalize matchups, merch, and content.</div>
        </div>

        <div class="card-text-pair mb-150">
          <div class="title50">Favorite NBA teams</div>
          <div class="labelRegular20 text-secondary">Pick as many as you want (yes, even rivals).</div>
        </div>
        <div class="tag-group mb-300" id="teamsGroup"></div>

        <div class="divider" aria-hidden="true"></div>

        <div class="card-text-pair mb-150">
          <div class="title50">Favorite players</div>
          <div class="labelRegular20 text-secondary">Add anyone you follow — we’ll surface highlights and news.</div>
        </div>

        <div class="two-col">
          <div class="field">
            <label class="labelBold30" for="playerInput">Add a player</label>
            <input id="playerInput" class="ds-input" placeholder="Anthony Edwards" />
          </div>
          <div class="field">
            <div class="labelBold30">&nbsp;</div>
            <button class="btn btn-secondary btn-300" type="button" id="addPlayerBtn">
              <span class="labelBold40">Add</span>
            </button>
          </div>
        </div>

        <div class="tag-group mt-200" id="playersGroup" aria-label="Favorite players list"></div>
      </section>

      <!-- STEP: Game day -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300" data-step="gameday" hidden>
        <div class="card-text-pair mb-200">
          <div class="title60">Game day preferences</div>
          <div class="labelRegular20 text-secondary">Help us recommend games that fit your schedule and vibe.</div>
        </div>

        <div class="card-text-pair mb-150">
          <div class="title50">Best days to go</div>
          <div class="labelRegular20 text-secondary">We’ll prioritize schedule alerts and ticket suggestions.</div>
        </div>
        <div class="tag-group mb-300" id="daysGroup"></div>

        <div class="divider" aria-hidden="true"></div>

        <div class="two-col">
          <div class="field">
            <div class="card-text-pair mb-100">
              <div class="labelBold30">Typical ticket budget</div>
              <div class="labelRegular20 text-secondary">For deal alerts and recs.</div>
            </div>
            <div class="tag-group" role="group" aria-label="Ticket budget" id="budgetGroup"></div>
          </div>

          <div class="field">
            <div class="card-text-pair mb-100">
              <div class="labelBold30">Who do you usually bring?</div>
              <div class="labelRegular20 text-secondary">For bundles + promos.</div>
            </div>
            <div class="tag-group" role="group" aria-label="Group type" id="groupTypeGroup"></div>
          </div>
        </div>

        <div class="divider" aria-hidden="true"></div>

        <div class="card-text-pair mb-150">
          <div class="title50">Seat + experience</div>
          <div class="labelRegular20 text-secondary">What kind of night are you looking for?</div>
        </div>
        <div class="tag-group" id="seatsGroup"></div>
      </section>

      <!-- STEP: Content -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300" data-step="content" hidden>
        <div class="card-text-pair mb-200">
          <div class="title60">Content and merch</div>
          <div class="labelRegular20 text-secondary">Tune what you see — and when we notify you.</div>
        </div>

        <div class="card-text-pair mb-150">
          <div class="title50">What should we show you?</div>
          <div class="labelRegular20 text-secondary">We’ll prioritize this on your home feed.</div>
        </div>
        <div class="tag-group mb-300" id="contentGroup"></div>

        <div class="divider" aria-hidden="true"></div>

        <div class="two-col">
          <div class="field">
            <div class="card-text-pair mb-100">
              <div class="labelBold30">How should we reach you?</div>
              <div class="labelRegular20 text-secondary">Only meaningful updates.</div>
            </div>
            <div class="tag-group" id="channelsGroup"></div>
          </div>

          <div class="field">
            <div class="card-text-pair mb-100">
              <div class="labelBold30">Merch sizing</div>
              <div class="labelRegular20 text-secondary">Optional — for better drops.</div>
            </div>
            <div class="tag-group" role="group" aria-label="Merch size" id="sizeGroup"></div>

            <div class="divider" aria-hidden="true"></div>

            <div class="card-text-pair mb-100">
              <div class="labelBold30">Favorite jersey set</div>
              <div class="labelRegular20 text-secondary">Optional.</div>
            </div>
            <div class="tag-group" role="group" aria-label="Jersey set" id="jerseyGroup"></div>
          </div>
        </div>
      </section>

      <!-- STEP: Review -->
      <section class="surface-card surface-borderNeutral border-radius-500 p-300" data-step="review" hidden>
        <div class="card-text-pair mb-200">
          <div class="title60">Review your profile</div>
          <div class="labelRegular20 text-secondary">You can edit anytime.</div>
        </div>

        <div class="grid gap-card mb-300" id="reviewGrid"></div>

        <div class="divider" aria-hidden="true"></div>

        <div class="card-text-pair">
          <div class="title50">What we’ll do with this</div>
          <div class="labelRegular20 text-secondary">
            Matchups you’ll care about, game alerts that fit your schedule, player-led stories, and offers that don’t waste your time.
          </div>
        </div>

        <pre class="json-preview bodyRegular30 text-secondary" id="jsonPreview" aria-label="Profile JSON preview"></pre>
      </section>

      <!-- Footer actions -->
      <footer class="surface-washNeutral surface-borderNeutral border-radius-500 p-200 mt-300">
        <div class="list-row-content">
          <div class="list-row-text-pair">
            <div class="labelBold30">Controls</div>
            <div class="labelRegular10 text-secondary" id="controlsHint">Continue to save on the last step.</div>
          </div>

          <div class="tag-group">
            <button class="btn btn-secondary btn-300" type="button" id="backBtn" disabled>
              <span class="labelBold40">Back</span>
            </button>

            <button class="btn btn-primary btn-300" type="button" id="nextBtn">
              <span class="labelBold40">Continue</span>
            </button>

            <button class="btn btn-transactional btn-300" type="button" id="saveBtn" hidden>
              <span class="labelBold40">Save preferences</span>
            </button>
          </div>
        </div>
      </footer>

      <div class="labelRegular20 text-secondary mt-200">
        Tip: This is front-end only. “Save” just downloads JSON locally.
      </div>
    </main>

    <script>
      // ----- Data (edit freely) -----
      const STEPS = [
        { key: "basics", label: "Basics", sublabel: "Who you are" },
        { key: "teams", label: "Teams + players", sublabel: "Who you ride with" },
        { key: "gameday", label: "Game day", sublabel: "How you go" },
        { key: "content", label: "Content + merch", sublabel: "What you want" },
        { key: "review", label: "Review", sublabel: "Lock it in" }
      ];

      const NBA_TEAMS = [
        "Timberwolves","Nuggets","Warriors","Lakers","Celtics","Bulls","Heat","Knicks","Suns","Mavericks"
      ];

      const FAN_LEVELS = ["New fan","Casual","Diehard","Season ticket member"];
      const GAME_DAYS = ["Weeknights","Friday nights","Saturday","Sunday","Matinee games","I’ll go anytime"];
      const SEATS = ["Lower bowl","Club level","Upper level","Courtside","Standing room","Family section"];
      const CONTENT = ["Highlights","Full game replays","Player interviews","Behind the scenes","Stats + analytics","Ticket offers","Merch drops"];
      const CHANNELS = ["Email","SMS","Push notifications"];
      const SIZES = ["XS","S","M","L","XL","2XL"];
      const JERSEYS = ["Icon","Statement","City","Classic"];
      const BUDGETS = ["Under $50","$50–$100","$100–$200","$200+"];
      const GROUPS = ["Solo","Friends","Family","Work"];

      // ----- State -----
      const state = {
        stepIndex: 0,
        basics: { displayName: "", homeCity: "", fanLevel: "" },
        teams: { favoriteTeams: ["Timberwolves"], favoritePlayers: [] },
        gameday: { preferredDays: [], preferredExperiences: [], ticketBudget: "", bringGroup: "" },
        content: { contentPrefs: [], commPrefs: ["Email"], merchSize: "", favoriteColorway: "" }
      };

      // ----- Helpers -----
      const $ = (sel, root = document) => root.querySelector(sel);
      const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

      function renderStepper() {
        const stepper = $("#stepper");
        stepper.innerHTML = "";
        STEPS.forEach((s, idx) => {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.className = "stepper-item";
          if (idx === state.stepIndex) btn.classList.add("is-active");
          if (idx < state.stepIndex) btn.classList.add("is-done");
          btn.setAttribute("aria-current", idx === state.stepIndex ? "step" : "");
          btn.innerHTML = `
            <span class="labelBold30">${s.label}</span>
            <span class="labelRegular20 text-secondary">${s.sublabel}</span>
          `;
          btn.addEventListener("click", () => goTo(idx));
          stepper.appendChild(btn);
        });

        $("#currentStepTitle").textContent = STEPS[state.stepIndex].label;
        $("#currentStepSubtitle").textContent = STEPS[state.stepIndex].sublabel;
        $("#progressText").textContent = `Step ${state.stepIndex + 1} of ${STEPS.length}`;
      }

      function showStep() {
        const key = STEPS[state.stepIndex].key;
        $$("[data-step]").forEach(el => (el.hidden = el.getAttribute("data-step") !== key));

        const isFirst = state.stepIndex === 0;
        const isLast = state.stepIndex === STEPS.length - 1;

        $("#backBtn").disabled = isFirst;
        $("#nextBtn").hidden = isLast;
        $("#saveBtn").hidden = !isLast;
        $("#controlsHint").textContent = isLast ? "Save downloads your preferences JSON." : "Continue to save on the last step.";

        // Keep inputs in sync
        $("#displayName").value = state.basics.displayName;
        $("#homeCity").value = state.basics.homeCity;

        renderStepper();
        if (key === "review") renderReview();
      }

      function goTo(idx) {
        state.stepIndex = Math.max(0, Math.min(STEPS.length - 1, idx));
        showStep();
      }

      function next() {
        if (!canProceed()) return;
        goTo(state.stepIndex + 1);
      }

      function back() {
        goTo(state.stepIndex - 1);
      }

      function canProceed() {
        const key = STEPS[state.stepIndex].key;
        if (key === "basics") return state.basics.displayName.trim().length > 0;
        return true;
      }

      function makeTag(label, { selected = false, teamColor = false } = {}) {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = `tag scale-300 ${teamColor ? "tag-team-color" : ""}`;
        btn.innerHTML = `<span class="labelRegular20 inherit-text">${label}</span>`;
        btn.dataset.value = label;
        if (selected) btn.classList.add("is-selected");
        btn.setAttribute("aria-pressed", selected ? "true" : "false");
        return btn;
      }

      function renderMultiSelect(container, options, getArr, setArr, { teamColor = false } = {}) {
        container.innerHTML = "";
        options.forEach(opt => {
          const selected = getArr().includes(opt);
          const tag = makeTag(opt, { selected, teamColor });
          tag.addEventListener("click", () => {
            const arr = getArr();
            const next = arr.includes(opt) ? arr.filter(x => x !== opt) : arr.concat(opt);
            setArr(next);
            renderMultiSelect(container, options, getArr, setArr, { teamColor });
          });
          container.appendChild(tag);
        });
      }

      function renderSingleSelect(container, options, getVal, setVal) {
        container.innerHTML = "";
        options.forEach(opt => {
          const selected = getVal() === opt;
          const tag = makeTag(opt, { selected });
          tag.addEventListener("click", () => {
            setVal(selected ? "" : opt);
            renderSingleSelect(container, options, getVal, setVal);
          });
          container.appendChild(tag);
        });
      }

      function renderPlayers() {
        const group = $("#playersGroup");
        group.innerHTML = "";
        if (state.teams.favoritePlayers.length === 0) {
          const hint = document.createElement("div");
          hint.className = "labelRegular20 text-secondary";
          hint.textContent = "No players added yet.";
          group.appendChild(hint);
          return;
        }

        state.teams.favoritePlayers.forEach(p => {
          const tag = makeTag(p, { selected: true });
          tag.innerHTML = `
            <span class="labelRegular20 inherit-text">${p}</span>
            <span class="labelRegular20 text-secondary">×</span>
          `;
          tag.addEventListener("click", () => {
            state.teams.favoritePlayers = state.teams.favoritePlayers.filter(x => x !== p);
            renderPlayers();
          });
          group.appendChild(tag);
        });
      }

      function renderReview() {
        const grid = $("#reviewGrid");
        grid.innerHTML = "";

        const rows = [
          {
            title: "Basics",
            subtitle: [
              state.basics.displayName || "(no name yet)",
              state.basics.homeCity || "(no city yet)",
              state.basics.fanLevel || "(no level yet)"
            ].join(" • "),
            editTo: 0
          },
          {
            title: "Teams + players",
            subtitle: `${state.teams.favoriteTeams.length ? state.teams.favoriteTeams.join(", ") : "No teams"} · ${
              state.teams.favoritePlayers.length ? state.teams.favoritePlayers.join(", ") : "No players"
            }`,
            editTo: 1
          },
          {
            title: "Game day",
            subtitle: `${state.gameday.preferredDays.length ? state.gameday.preferredDays.join(", ") : "No days"} · ${
              state.gameday.ticketBudget || "No budget"
            } · ${state.gameday.bringGroup || "No group"}`,
            editTo: 2
          },
          {
            title: "Content + merch",
            subtitle: `${state.content.contentPrefs.length ? state.content.contentPrefs.join(", ") : "No content prefs"} · ${
              state.content.commPrefs.join(", ")
            } · ${state.content.merchSize || "No size"}`,
            editTo: 3
          }
        ];

        rows.forEach(r => {
          const row = document.createElement("div");
          row.className = "review-row";
          row.innerHTML = `
            <div class="review-row-main">
              <div class="labelBold40">${r.title}</div>
              <div class="labelRegular20 text-secondary">${r.subtitle}</div>
            </div>
            <button class="btn btn-secondary btn-100" type="button">
              <span class="labelBold30">Edit</span>
            </button>
          `;
          $("button", row).addEventListener("click", () => goTo(r.editTo));
          grid.appendChild(row);
        });

        const payload = {
          displayName: state.basics.displayName,
          homeCity: state.basics.homeCity,
          fanLevel: state.basics.fanLevel,
          favoriteTeams: state.teams.favoriteTeams,
          favoritePlayers: state.teams.favoritePlayers,
          preferredDays: state.gameday.preferredDays,
          preferredExperiences: state.gameday.preferredExperiences,
          ticketBudget: state.gameday.ticketBudget,
          bringGroup: state.gameday.bringGroup,
          contentPrefs: state.content.contentPrefs,
          commPrefs: state.content.commPrefs,
          merchSize: state.content.merchSize,
          favoriteColorway: state.content.favoriteColorway
        };

        $("#jsonPreview").textContent = JSON.stringify(payload, null, 2);
      }

      function downloadJSON() {
        const payload = {
          displayName: state.basics.displayName,
          homeCity: state.basics.homeCity,
          fanLevel: state.basics.fanLevel,
          favoriteTeams: state.teams.favoriteTeams,
          favoritePlayers: state.teams.favoritePlayers,
          preferredDays: state.gameday.preferredDays,
          preferredExperiences: state.gameday.preferredExperiences,
          ticketBudget: state.gameday.ticketBudget,
          bringGroup: state.gameday.bringGroup,
          contentPrefs: state.content.contentPrefs,
          commPrefs: state.content.commPrefs,
          merchSize: state.content.merchSize,
          favoriteColorway: state.content.favoriteColorway
        };

        const blob = new Blob([JSON.stringify(payload, null, 2)], { type: "application/json" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "wolves-fan-preferences.json";
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      }

      // ----- Wire up inputs -----
      $("#displayName").addEventListener("input", (e) => { state.basics.displayName = e.target.value; });
      $("#homeCity").addEventListener("input", (e) => { state.basics.homeCity = e.target.value; });

      // Fan level single-select
      renderSingleSelect($("#fanLevelGroup"), FAN_LEVELS, () => state.basics.fanLevel, v => state.basics.fanLevel = v);

      // Teams multi-select
      renderMultiSelect(
        $("#teamsGroup"),
        NBA_TEAMS,
        () => state.teams.favoriteTeams,
        (v) => state.teams.favoriteTeams = v,
        { teamColor: true }
      );

      // Game day
      renderMultiSelect($("#daysGroup"), GAME_DAYS, () => state.gameday.preferredDays, v => state.gameday.preferredDays = v);
      renderSingleSelect($("#budgetGroup"), BUDGETS, () => state.gameday.ticketBudget, v => state.gameday.ticketBudget = v);
      renderSingleSelect($("#groupTypeGroup"), GROUPS, () => state.gameday.bringGroup, v => state.gameday.bringGroup = v);
      renderMultiSelect($("#seatsGroup"), SEATS, () => state.gameday.preferredExperiences, v => state.gameday.preferredExperiences = v);

      // Content
      renderMultiSelect($("#contentGroup"), CONTENT, () => state.content.contentPrefs, v => state.content.contentPrefs = v);
      renderMultiSelect($("#channelsGroup"), CHANNELS, () => state.content.commPrefs, v => state.content.commPrefs = v);
      renderSingleSelect($("#sizeGroup"), SIZES, () => state.content.merchSize, v => state.content.merchSize = v);
      renderSingleSelect($("#jerseyGroup"), JERSEYS, () => state.content.favoriteColorway, v => state.content.favoriteColorway = v);

      // Players add/remove
      $("#addPlayerBtn").addEventListener("click", () => {
        const input = $("#playerInput");
        const cleaned = (input.value || "").trim();
        if (!cleaned) return;
        const exists = state.teams.favoritePlayers.some(p => p.toLowerCase() === cleaned.toLowerCase());
        if (!exists) state.teams.favoritePlayers.push(cleaned);
        input.value = "";
        renderPlayers();
      });
      $("#playerInput").addEventListener("keydown", (e) => {
        if (e.key === "Enter") { e.preventDefault(); $("#addPlayerBtn").click(); }
      });
      renderPlayers();

      // Actions
      $("#backBtn").addEventListener("click", back);
      $("#nextBtn").addEventListener("click", next);
      $("#saveBtn").addEventListener("click", () => {
        renderReview();
        downloadJSON();
      });

      // Init
      renderStepper();
      showStep();
    </script>
  </body>
</html>